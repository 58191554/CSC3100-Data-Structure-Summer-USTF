# Assignment 2 选题

[Implementation of Treap Data Structure (Insert, Search, and Delete) | Techie Delight](https://www.techiedelight.com/implementation-treap-data-structure-cpp-java-insert-search-delete/)

Treap template

## 核心城市(Tree structure and find the minimum distance)

[【XR-3】核心城市](https://www.luogu.com.cn/problem/P5536)

## 题目描述

X 国有 $n$ 座城市，$n - 1$ 条长度为 $1$ 的道路，每条道路连接两座城市，且任意两座城市都能通过若干条道路相互到达，显然，城市和道路形成了一棵树。

X 国国王决定将 $k$ 座城市钦定为 X 国的核心城市，这 $k$ 座城市需满足以下两个条件：

1. 这 $k$ 座城市可以通过道路，在不经过其他城市的情况下两两相互到达。
2. 定义某个非核心城市与这 $k$ 座核心城市的距离为，这座城市与 $k$ 座核心城市的距离的最小值。那么所有非核心城市中，与核心城市的距离最大的城市，其与核心城市的距离最小。你需要求出这个最小值。

## 输入格式

第一行 $2$ 个正整数 $n,k$。

接下来 $n - 1$ 行，每行 $2$ 个正整数 $u,v$，表示第 $u$ 座城市与第 $v$座城市之间有一条长度为 $1$ 的道路。

**数据范围：**

- $1 \le k < n \le 10 ^ 5$。
- $1 \le u,v \le n, u \ne v$，保证城市与道路形成一棵树。

## 输出格式

一行一个整数，表示答案。

## 样例 #1

### 样例输入 #1

```
6 3
1 2
2 3
2 4
1 5
5 6

```

### 样例输出 #1

```
1

```

## 提示

【样例说明】

钦定 $1,2,5$ 这$3$ 座城市为核心城市，这样 $3,4,6$ 另外 $3$ 座非核心城市与核心城市的距离均为 $1$，因此答案为 $1$。

## Q1 中位数（Max and Min Heap)

[中位数](https://www.luogu.com.cn/problem/P1168)

## 题目描述

给出一个长度为$N$的非负整数序列$A_i$，对于所有$1 ≤ k ≤ (N + 1) / 2$，输出$A_1, A_1 \sim A_3, …,A_1 \sim A_{2k - 1}$的中位数。即前$1,3,5,…$个数的中位数。

## 输入格式

第$1$行为一个正整数$N$，表示了序列长度。

第$2$行包含$N$个非负整数$A_i (A_i ≤ 10^9)$。

## 输出格式

共$(N + 1) / 2$行，第$i$行为$A_1, A_3, …, A_{2k - 1}$的中位数。

## 样例 #1

### 样例输入 #1

```
7
1 3 5 7 9 11 6

```

### 样例输出 #1

```
1
3
5
6

```

## 提示

对于$20\%$的数据，$N ≤ 100$；

对于$40\%$的数据，$N ≤ 3000$；

对于$100\%$的数据，$N ≤ 100000$。

## ****普通平衡树****(Balance Tree)

[](https://loj.ac/p/104)

**题目描述**

这是一道模板题。

您需要写一种数据结构（可参考题目标题），来维护一些数，其中需要提供以下操作：

1. 插入  x数；
2. 删除  x数（若有多个相同的数，只删除一个）；
3. 查询  x数的排名（若有多个相同的数，输出最小的排名）；
4. 查询排名为  x的数；
5. 求  x的前驱（前驱定义为小于 ，且最大的数）；
6. 求 x的后继（后继定义为大于 ，且最小的数）。

**输入格式**

第一行为 $n$，表示操作的个数，下面  n行每行有两个数  $opt$ 和$x$ ， 表示操作的序号$（1≤opt≤6）$。

**输出格式**

对于操作 3、4、5、6 每行输出一个数，表示对应答案。

**样例**

**Input**

```bash
10
1 106465
4 1
1 317721
1 460929
1 644985
1 84185
1 89851
6 81968
1 492737
5 493598
``
```

**Output**

```bash
106465
84185
492737
```

**数据范围与提示**

$1≤n≤10^5, -10^7≤x≤10^7$
